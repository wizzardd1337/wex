-- === [НАСТРОЙКИ] ===

-- Введи ключ вручную перед запуском скрипта (в Executor)
local userKey = "KEY123"

-- Таблица всех ключей и сколько они действуют (в минутах)
local keys = {
    ["robloxpidor"] = 2,    -- 60 минут
    ["KEY456"] = 1440,  -- 1 день
    ["WEXCORE1337"] = 9999 -- пример VIP ключа
}

-- === [ПРОВЕРКА КЛЮЧА] ===

local player = game:GetService("Players").LocalPlayer
local currentTime = os.time()

-- Хранилище данных активации (на сессию)
local container = player:FindFirstChild("ActivationStorage")
if not container then
    container = Instance.new("Folder")
    container.Name = "ActivationStorage"
    container.Parent = player
end

-- Получить или создать хранилище времени активации
local function getOrCreateActivationValue(key)
    local value = container:FindFirstChild(key)
    if not value then
        value = Instance.new("IntValue")
        value.Name = key
        value.Value = 0
        value.Parent = container
    end
    return value
end

-- Основная проверка ключа
local function isKeyValid(key)
    local validMinutes = keys[key]
    if not validMinutes then
        return false, "Ключ не найден"
    end

    local activationValue = getOrCreateActivationValue(key)

    -- Если первый раз — сохранить время активации
    if activationValue.Value == 0 then
        activationValue.Value = currentTime
    end

    -- Сколько прошло минут
    local elapsed = math.floor((currentTime - activationValue.Value) / 60)

    -- Если просрочен
    if elapsed > validMinutes then
        return false, "Срок действия ключа истёк (" .. elapsed .. " мин назад)"
    end

    -- Успешно: вернуть сколько осталось
    return true, validMinutes - elapsed
end

-- === [РЕЗУЛЬТАТ] ===

local success, info = isKeyValid(userKey)

if success then
    print("✅ Ключ принят! Осталось минут: " .. info)
    print("▶ Запуск основного скрипта...")

    -- Загружаем твой скрипт
    loadstring(game:HttpGet("https://raw.githubusercontent.com/wizzardd1337/adminguii/main/admingui", true))()

else
    warn("❌ Ошибка: " .. info)
end
